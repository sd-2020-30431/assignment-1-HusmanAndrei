{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Desktop/sd final/wasteless-final2/src/pages/Home.js\";\nimport React from 'react';\nimport httpInstance from \"../services/httpService\";\nimport GroceryList from \"../components/GroceryList\";\nimport { MuiThemeProvider } from 'material-ui';\nimport RaisedButton from \"material-ui/RaisedButton\";\nimport AddItem from \"../components/AddItem\";\nimport CalendarSelect from \"../components/CalendarSelect\";\nimport GroceryCard from \"../components/GroceryCard\";\nimport Report from \"../components/Report\";\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groceryList: [],\n      selectedItem: null,\n      report: {\n        weekCalories: -1,\n        monthCalories: -1,\n        weekQuantity: -1,\n        monthQuantity: -1\n      }\n    };\n  }\n\n  async componentDidMount() {\n    const id = localStorage.getItem('token');\n    const groceries = await httpInstance.getGroceries(id);\n    this.setState({\n      groceryList: groceries\n    });\n    await this.fetchReports(id);\n  }\n\n  async fetchReports(id) {\n    const reports = await httpInstance.getReports(id);\n    this.setState({\n      report: reports\n    });\n  }\n\n  validateDates(purchase, consumption, expiration) {\n    return purchase <= consumption <= expiration;\n  }\n\n  async add(groceryItem) {\n    const id = localStorage.getItem('token');\n\n    if (!this.validateDates(groceryItem.purchaseDate, groceryItem.consumptionDate, groceryItem.expirationDate)) {\n      alert('Cannot add item. The dates should be in ascending order.');\n      return;\n    }\n\n    const returnedItem = await httpInstance.addGrocery(id, groceryItem);\n\n    if (returnedItem.id === null) {\n      alert('Cannot add item.');\n    } else {\n      const newItems = JSON.parse(JSON.stringify(this.state.groceryList));\n      newItems.push(returnedItem);\n      this.setState({\n        groceryList: newItems\n      });\n    }\n  }\n\n  selectItem(item) {\n    this.setState({\n      selectedItem: item\n    });\n  }\n\n  async donateItem(itemId) {\n    const id = localStorage.getItem('token');\n    const response = await httpInstance.donateItem(id, itemId);\n\n    if (this.state.selectedItem.id === itemId) {\n      this.setState({\n        selectedItem: null\n      });\n    }\n\n    const newItems = this.state.groceryList.filter(item => item.id !== itemId);\n    this.setState({\n      groceryList: newItems\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        paddingBottom: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        height: '100%',\n        width: '100%',\n        alignItems: 'center',\n        justifyContent: 'space-around'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flexGrow: 2,\n        margin: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    }, \" My groceries\"), /*#__PURE__*/React.createElement(GroceryList, {\n      items: this.state.groceryList,\n      headers: [\"Name\", \"Quantity\", \"Calories\"],\n      onSelect: this.selectItem.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flexGrow: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(AddItem, {\n      add: this.add.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        marginLeft: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flexGrow: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, \"Selected grocery\"), this.state.selectedItem !== null ? /*#__PURE__*/React.createElement(GroceryCard, {\n      item: this.state.selectedItem,\n      donateItem: this.donateItem.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 57\n      }\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flexGrow: 1,\n        padding: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }\n    }, \"Reports\"), /*#__PURE__*/React.createElement(Report, {\n      report: this.state.report,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}","map":{"version":3,"sources":["/Users/macbookpro/Desktop/sd final/wasteless-final2/src/pages/Home.js"],"names":["React","httpInstance","GroceryList","MuiThemeProvider","RaisedButton","AddItem","CalendarSelect","GroceryCard","Report","HomePage","Component","constructor","props","state","groceryList","selectedItem","report","weekCalories","monthCalories","weekQuantity","monthQuantity","componentDidMount","id","localStorage","getItem","groceries","getGroceries","setState","fetchReports","reports","getReports","validateDates","purchase","consumption","expiration","add","groceryItem","purchaseDate","consumptionDate","expirationDate","alert","returnedItem","addGrocery","newItems","JSON","parse","stringify","push","selectItem","item","donateItem","itemId","response","filter","render","display","flexDirection","paddingBottom","height","width","alignItems","justifyContent","flexGrow","margin","bind","marginLeft","padding"],"mappings":"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","sourcesContent":["import React from 'react';\nimport httpInstance from \"../services/httpService\";\nimport GroceryList from \"../components/GroceryList\";\nimport {MuiThemeProvider} from 'material-ui'\nimport RaisedButton from \"material-ui/RaisedButton\";\nimport AddItem from \"../components/AddItem\";\nimport CalendarSelect from \"../components/CalendarSelect\";\nimport GroceryCard from \"../components/GroceryCard\";\nimport Report from \"../components/Report\";\n\n\nexport default class HomePage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            groceryList: [],\n            selectedItem: null,\n            report: {\n                weekCalories: -1,\n                monthCalories: -1,\n                weekQuantity: -1,\n                monthQuantity: -1\n            }\n        }\n\n    }\n\n    async componentDidMount() {\n        const id = localStorage.getItem('token');\n        const groceries = await httpInstance.getGroceries(id);\n        this.setState({\n            groceryList: groceries\n        });\n        await this.fetchReports(id)\n    }\n\n    async fetchReports(id){\n        const reports = await httpInstance.getReports(id);\n        this.setState({\n            report: reports\n        });\n    }\n\n    validateDates(purchase, consumption, expiration) {\n        return purchase <= consumption <= expiration;\n    }\n\n    async add(groceryItem) {\n        const id = localStorage.getItem('token');\n        if (!this.validateDates(groceryItem.purchaseDate, groceryItem.consumptionDate, groceryItem.expirationDate)) {\n            alert('Cannot add item. The dates should be in ascending order.')\n            return;\n        }\n        const returnedItem = await httpInstance.addGrocery(id, groceryItem);\n        if (returnedItem.id === null) {\n            alert('Cannot add item.');\n        } else {\n            const newItems = JSON.parse(JSON.stringify(this.state.groceryList));\n            newItems.push(returnedItem);\n            this.setState({\n                groceryList: newItems\n            })\n        }\n    }\n\n    selectItem(item){\n        this.setState({\n            selectedItem: item\n        })\n    }\n\n    async donateItem(itemId){\n        const id = localStorage.getItem('token');\n        const response = await httpInstance.donateItem(id, itemId);\n        if(this.state.selectedItem.id === itemId){\n            this.setState({\n                selectedItem : null\n            })\n        }\n        const newItems = this.state.groceryList.filter(item => item.id !== itemId);\n        this.setState({\n            groceryList: newItems\n        });\n    }\n\n\n    render() {\n        return (\n            <MuiThemeProvider>\n                <div style={{display: 'flex', flexDirection: 'column', paddingBottom: 40}}>\n                    <div style={{\n                        display: 'flex',\n                        height: '100%',\n                        width: '100%',\n                        alignItems: 'center',\n                        justifyContent: 'space-around',\n                    }}>\n                        <div style={{flexGrow: 2, margin: 30}}>\n                            <h3> My groceries</h3>\n\n                            <GroceryList items={this.state.groceryList} headers={[\"Name\", \"Quantity\", \"Calories\"]} onSelect={this.selectItem.bind(this)}/>\n                        </div>\n                        <div style={{flexGrow: 1}}>\n                            <AddItem add={this.add.bind(this)}/>\n                        </div>\n                    </div>\n                    <div style={{display: 'flex', justifyContent: 'space-around', marginLeft: 30}}>\n                        <div style={{flexGrow: 1}}>\n                        <h3>Selected grocery</h3>\n                    {this.state.selectedItem !== null ? <GroceryCard item={this.state.selectedItem} donateItem={this.donateItem.bind(this)} /> : null}\n                        </div>\n                        <div style={{flexGrow: 1, padding: 30}}>\n                            <h3>Reports</h3>\n                            <Report report={this.state.report}  />\n                        </div>\n                    </div>\n                </div>\n            </MuiThemeProvider>\n\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}